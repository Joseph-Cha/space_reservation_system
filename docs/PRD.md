# PRD: 장소 예약 시스템
**Product Requirements Document**

---

## 1. 문서 정보
- **문서 버전**: 1.1
- **작성일**: 2025-11-09
- **최종 수정일**: 2025-11-09
- **문서 상태**: Draft

---

## 2. 프로젝트 개요

### 2.1 목적
권한이 있는 사용자만 조직 내 회의실 및 공용 공간을 효율적으로 예약하고 관리할 수 있는 웹 기반 예약 시스템을 개발한다.

### 2.2 배경
조직 내 다양한 공용 장소(회의실, 세미나실, 휴게 공간 등)를 여러 팀과 구성원이 공유하여 사용하고 있으나, 체계적인 예약 관리 시스템이 부재하여 이중 예약, 공간 활용 비효율 등의 문제가 발생하고 있다.

### 2.3 범위
- **포함**: 장소 예약, 예약 조회, 캘린더 기반 UI, 사용자 인증
- **미포함**: 모바일 앱, 결제 기능, 외부 시스템 연동

---

## 3. 목표 및 성공 지표

### 3.1 비즈니스 목표
- 공간 활용률 향상
- 이중 예약 방지
- 예약 프로세스 간소화 및 투명성 확보

### 3.2 성공 지표 (KPI)
- 시스템 도입 후 이중 예약 발생률 0%
- 예약 완료까지 소요 시간 3분 이내
- 사용자 만족도 80% 이상
- 공간 활용률 측정 가능

---

## 4. 사용자 페르소나

### 4.1 주요 사용자
**일반 예약자 (Primary User)**
- 조직 구성원으로 회의실 또는 공용 공간을 예약하려는 사용자
- 본인의 소속과 사용 목적을 명확히 기재
- 빠르고 직관적인 예약을 원함

### 4.2 부가 사용자
**관리자 (Admin - 향후 구현 예정)**
- 장소 관리, 사용자 권한 관리, 예약 현황 모니터링

---

## 5. 기능 요구사항

### 5.1 사용자 인증 및 회원가입
- **REQ-001**: 이메일 기반 회원가입 기능 제공
- **REQ-002**: 회원가입 시 입력 정보:
  - 이메일 주소 (필수, 유효한 이메일 형식)
  - 비밀번호 (필수, 최소 8자 이상, 영문+숫자 조합)
  - 비밀번호 확인 (필수, 비밀번호와 일치)
  - 이름 (필수)
  - 소속/부서 (필수)
- **REQ-003**: 이메일 중복 확인 (이미 가입된 이메일은 재사용 불가)
- **REQ-004**: 이메일 인증 프로세스:
  - 회원가입 정보 입력 후 입력한 이메일 주소로 6자리 인증번호 발송
  - 인증번호 유효 시간: 발송 후 5분
  - 사용자가 인증번호 입력 화면에서 6자리 숫자 입력
  - 인증번호 일치 시 회원가입 완료
  - 인증번호 불일치 시 오류 메시지 표시 및 재입력 가능
  - 인증번호 재발송 기능 제공 (최대 3회)
- **REQ-005**: 이메일 인증 완료된 사용자만 시스템 로그인 가능
- **REQ-006**: 로그인 기능:
  - 이메일 주소와 비밀번호로 로그인
  - 로그인 실패 시 적절한 오류 메시지 표시
  - 로그인 성공 시 세션 또는 토큰 발급

### 5.2 캘린더 기반 날짜 선택
- **REQ-007**: 메인 화면에서 캘린더 형태로 날짜를 확인할 수 있어야 함
- **REQ-008**: 사용자가 원하는 날짜를 클릭하여 선택할 수 있어야 함
- **REQ-009**: 현재 날짜 이전의 날짜는 선택 불가능해야 함

### 5.3 장소 및 시간 테이블 조회
- **REQ-010**: 선택한 날짜의 장소별 시간대 예약 현황을 테이블 형태로 표시
- **REQ-011**: 지원 장소 목록:
  - vision on
  - 월드비전홀
  - 순보금자리
  - 푸른초장
  - 쉴만한 물가
  - 넘치는 잔
  - Vision Factory 1
  - Vision Factory 2
  - Vision Factory 3
  - Vision Factory 4
  - Vision Factory 5
- **REQ-012**: 시간대는 07:00 ~ 22:00, 30분 단위로 구분
- **REQ-013**: 예약 가능/불가능 상태를 시각적으로 구분하여 표시

### 5.4 예약 생성
- **REQ-014**: 사용자가 특정 장소의 특정 시간대를 클릭하여 예약 프로세스 시작
- **REQ-015**: 예약 상세 정보 입력 팝업 제공:
  - **소속** (필수): 사용자가 속한 부서 또는 팀 (회원가입 시 입력한 정보 자동 표시)
  - **이름** (필수): 예약자 이름 (회원가입 시 입력한 정보 자동 표시)
  - **목적** (필수): 예약 사유 또는 사용 목적
  - **이용 시간** (필수):
    - 시작 시간: 클릭한 시간이 기본값, 변경 가능
    - 종료 시간: 클릭한 시간 + 30분이 기본값, 변경 가능
    - 30분 단위로만 선택 가능
- **REQ-016**: 시작 시간은 종료 시간보다 이전이어야 함 (유효성 검증)
- **REQ-017**: 선택한 시간대가 이미 예약된 경우 예약 불가 안내

### 5.5 예약 확인
- **REQ-018**: 예약 완료 시 사용자에게 확인 메시지 표시
- **REQ-019**: 테이블에 새로 생성된 예약이 즉시 반영되어야 함

---

## 6. 비기능 요구사항

### 6.1 성능
- **NFR-001**: 페이지 로딩 시간 3초 이내
- **NFR-002**: 예약 생성 응답 시간 2초 이내

### 6.2 사용성
- **NFR-003**: 직관적인 UI/UX로 별도의 사용자 교육 없이 사용 가능
- **NFR-004**: 반응형 웹 디자인으로 다양한 화면 크기 지원

### 6.3 보안
- **NFR-005**: 인증되지 않은 사용자의 접근 차단
- **NFR-006**: 개인정보(이름, 소속) 보호를 위한 적절한 권한 관리

### 6.4 확장성
- **NFR-007**: 향후 장소 추가/삭제가 용이한 구조
- **NFR-008**: 관리자 기능 추가를 고려한 아키텍처 설계

---

## 7. 사용자 플로우

### 7.1 회원가입 플로우
```
1. 회원가입 화면 진입
   ↓
2. 회원 정보 입력 (이메일, 비밀번호, 이름, 소속)
   ↓
3. 입력 정보 유효성 검증 (이메일 형식, 비밀번호 규칙, 중복 확인)
   ↓
4. 입력한 이메일로 6자리 인증번호 발송
   ↓
5. 이메일 인증번호 입력 화면으로 이동
   ↓
6. 사용자가 받은 인증번호 6자리 입력
   ↓
7. 인증번호 일치 여부 확인
   ↓
8-a. 일치하는 경우: 회원가입 완료, 로그인 화면으로 이동
8-b. 불일치하는 경우: 오류 메시지 표시 및 재입력 요청
   ↓
9. (선택) 인증번호 재발송 버튼 클릭 시 새로운 인증번호 발송
```

### 7.2 로그인 플로우
```
1. 로그인 화면 진입
   ↓
2. 이메일과 비밀번호 입력
   ↓
3. 로그인 버튼 클릭
   ↓
4. 이메일 인증 완료 여부 및 계정 정보 확인
   ↓
5-a. 인증 완료 + 정보 일치: 로그인 성공, 캘린더 화면으로 이동
5-b. 인증 미완료: 이메일 인증 필요 안내
5-c. 정보 불일치: 로그인 실패 메시지 표시
```

### 7.3 예약 생성 플로우
```
1. 로그인 완료 후 캘린더 화면 진입
   ↓
2. 원하는 날짜 클릭
   ↓
3. 장소별 시간 테이블 화면 표시
   ↓
4. 원하는 장소와 시간대 클릭
   ↓
5. 예약 상세 정보 입력 팝업 표시
   ↓
6. 정보 확인/수정 (소속, 이름은 자동 표시, 목적 및 시간 입력)
   ↓
7. 예약 생성 버튼 클릭
   ↓
8. 유효성 검증 (시간 중복 확인 등)
   ↓
9. 예약 완료 및 테이블 갱신
```

---

## 8. 화면 정의

### 8.1 회원가입 화면
- 회원가입 폼 제공
- 입력 필드:
  - 이메일 주소 (이메일 형식 검증)
  - 비밀번호 (최소 8자, 영문+숫자 조합)
  - 비밀번호 확인 (일치 여부 검증)
  - 이름
  - 소속/부서
- 실시간 유효성 검증 피드백
- 이메일 중복 확인
- 회원가입 버튼 클릭 시 이메일 발송 및 인증 화면으로 이동
- 로그인 화면으로 이동 링크 제공

### 8.2 이메일 인증 화면
- 입력한 이메일 주소 표시
- 6자리 인증번호 입력 필드
- 인증번호 유효 시간 카운트다운 표시 (5분)
- 인증 확인 버튼
- 인증번호 재발송 버튼 (최대 3회)
- 인증 실패 시 오류 메시지 표시
- 인증 성공 시 로그인 화면으로 자동 이동

### 8.3 로그인 화면
- 이메일과 비밀번호 입력 필드
- 로그인 버튼
- 로그인 실패 시 오류 메시지 표시
- 회원가입 화면으로 이동 링크 제공
- (향후) 비밀번호 찾기 링크

### 8.4 캘린더 화면 (메인)
- 월별 캘린더 뷰
- 날짜 클릭 시 해당 날짜의 예약 현황 화면으로 이동
- 현재 날짜 이전은 비활성화

### 8.5 장소/시간 테이블 화면
- 선택한 날짜 정보 표시
- 테이블 구조:
  - 행(Row): 30분 단위 시간대 (07:00 ~ 22:00)
  - 열(Column): 장소 목록
  - 셀(Cell): 예약 가능/불가능 상태
- 예약된 셀에는 예약자 정보 표시 (선택 사항)
- 빈 셀 클릭 시 예약 생성 팝업 표시

### 8.6 예약 상세 정보 입력 팝업
- 모달 또는 사이드 패널 형태
- 입력 필드:
  - 소속 (회원가입 정보 자동 표시, 수정 가능)
  - 이름 (회원가입 정보 자동 표시, 수정 가능)
  - 목적 (텍스트 영역)
  - 시작 시간 (시간 선택기, 30분 단위)
  - 종료 시간 (시간 선택기, 30분 단위)
- 버튼: 예약하기, 취소

---

## 9. 데이터 모델 (개념적)

### 9.1 사용자 (User)
- user_id (PK)
- email (Unique, 이메일 주소)
- password_hash (암호화된 비밀번호)
- name (이름)
- department (소속/부서)
- is_email_verified (이메일 인증 완료 여부, Boolean)
- role (권한, 기본값: 'user')
- created_at (가입일시)
- updated_at (수정일시)

### 9.2 이메일 인증 (EmailVerification)
- verification_id (PK)
- user_id (FK)
- email (인증할 이메일 주소)
- verification_code (6자리 인증번호)
- expires_at (인증번호 만료 시간, 발송 후 5분)
- is_verified (인증 완료 여부)
- attempt_count (재발송 횟수, 최대 3회)
- created_at (발송일시)

### 9.3 장소 (Space)
- space_id (PK)
- space_name (장소명)
- capacity (수용 인원, 향후 확장)
- status (활성/비활성)

### 9.4 예약 (Reservation)
- reservation_id (PK)
- user_id (FK)
- space_id (FK)
- date (예약 날짜)
- start_time (시작 시간)
- end_time (종료 시간)
- purpose (예약 목적)
- created_at (예약 생성일시)
- updated_at (예약 수정일시)

---

## 10. 제약사항 및 가정

### 10.1 제약사항
- 회원가입은 이메일 기반으로만 가능 (소셜 로그인 미지원)
- 이메일 인증번호는 발송 후 5분간 유효
- 인증번호 재발송은 최대 3회까지 가능
- 예약 단위는 30분으로 고정
- 운영 시간은 07:00 ~ 22:00로 제한
- 동일 장소에 대한 시간 중복 예약 불가
- 이메일 인증을 완료하지 않은 사용자는 로그인 불가

### 10.2 가정
- 사용자는 유효한 이메일 주소를 보유
- 이메일 수신 환경이 정상적으로 작동
- 사용자는 웹 브라우저를 통해 접근
- 네트워크 환경이 안정적임
- 예약 취소/수정 기능은 향후 추가 예정
- 관리자 기능은 1차 버전에서 제외
- 비밀번호 찾기 기능은 향후 추가 예정

---

## 11. 향후 확장 가능성

### 11.1 Phase 2 예정 기능
- 비밀번호 찾기 (이메일 인증을 통한 재설정)
- 예약 수정/취소 기능
- 내 예약 목록 조회
- 반복 예약 (주간/월간)
- 예약 확인 알림 (이메일)
- 예약 시간 리마인더 (이메일/푸시)

### 11.2 Phase 3 예정 기능
- 소셜 로그인 (구글, 네이버 등)
- 관리자 대시보드
- 사용자 권한 관리
- 통계 및 리포트
- 장소별 이용률 분석
- 모바일 앱

---

## 12. 우선순위

### P0 (필수)
- 이메일 기반 회원가입
- 이메일 인증번호 발송 및 검증
- 로그인/로그아웃
- 캘린더 날짜 선택
- 장소/시간 테이블 조회
- 예약 생성

### P1 (중요)
- 예약 현황 실시간 반영
- 유효성 검증 (이메일 형식, 비밀번호 규칙, 시간 중복 등)
- 이메일 인증번호 재발송
- 반응형 디자인
- 비밀번호 암호화

### P2 (개선)
- 사용자 경험 최적화 (로딩 인디케이터, 에러 핸들링)
- 성능 개선
- 이메일 템플릿 디자인
- 접근성 개선

---

## 13. 기술 스택 (권장 사항)

### Frontend
- React 또는 Vue.js
- CSS Framework (Tailwind, Material-UI 등)
- 캘린더 라이브러리 (FullCalendar, react-calendar 등)

### Backend
- Node.js (Express) 또는 Python (Django/Flask)
- RESTful API

### Database
- PostgreSQL 또는 MySQL
- Redis (인증번호 임시 저장용, 선택 사항)

### 인증
- JWT 또는 Session 기반 인증
- bcrypt 또는 argon2 (비밀번호 해싱)

### 이메일 서비스
- SMTP 서버 (Gmail SMTP, AWS SES, SendGrid 등)
- Nodemailer (Node.js) 또는 smtplib (Python)
- 이메일 템플릿 엔진

---

## 14. 리스크 및 대응 방안

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|-----------|
| 이메일 발송 실패 또는 지연 | 높음 | 신뢰성 높은 이메일 서비스 선택 (AWS SES, SendGrid), 재시도 로직 구현, 발송 실패 시 사용자 알림 |
| 이메일이 스팸으로 분류 | 높음 | SPF, DKIM, DMARC 설정, 이메일 내용 및 발신자 최적화 |
| 인증번호 무차별 대입 공격 | 중간 | IP별 시도 횟수 제한, CAPTCHA 추가, 계정 일시 잠금 |
| 동시 예약 시도로 인한 충돌 | 높음 | 트랜잭션 처리 및 락(lock) 메커니즘 구현 |
| 비밀번호 보안 취약점 | 높음 | 강력한 해싱 알고리즘 사용, HTTPS 필수, 비밀번호 정책 강화 |
| 사용자 권한 관리 복잡도 | 중간 | 단순한 역할 기반 접근 제어(RBAC)로 시작 |
| 확장성 부족 | 중간 | 모듈화된 아키텍처 설계 |

---

## 15. 타임라인 (예상)

- **Week 1-2**: 요구사항 확정, 기술 스택 선정, DB 설계, 이메일 서비스 설정
- **Week 3**: Backend API 개발 - 회원가입, 이메일 인증
- **Week 4**: Backend API 개발 - 로그인, 인증/권한 관리
- **Week 5**: Backend API 개발 - 예약 CRUD, 검증 로직
- **Week 6-7**: Frontend 개발 (회원가입/로그인 UI, 캘린더, 예약 UI)
- **Week 8**: 통합 테스트, 이메일 발송 테스트
- **Week 9**: 배포 및 사용자 피드백

---

## 16. 참고 문서
- 기획 문서.md

---

## 변경 이력
| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2025-11-09 | 초안 작성 | - |
| 1.1 | 2025-11-09 | 이메일 기반 회원가입 및 인증번호 인증 기능 추가 | - |
